<ion-view cache-view="false">
  <ion-nav-buttons side="right">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-nav-title>
    <div class="bar bar-header bar-positive">
      <div class="title">{{title}}
      </div>
    </div>
  </ion-nav-title>
  <ng-form role="form" name="leadform" ng-init="forms.leadForm=leadform" novalidate>

    <ion-content style="height: calc(100% - 100px);" id="new_lead" padding="true">
      <fancy-select class="fancy-select text-right" header-text="בחר סוג ליד" items="conf.types" value="lead.LEAD_TYPE" value-property="TYPE" text-property="DESCRIPTION" allow-empty='false' text="בחרו סוג ליד" not-img-class="hidden" note-text=" : סוג ליד "
        value-changed="onValueChanged(value)" get-custom-text="getCustomText(value)" note-img-class="icon ion-android-checkmark-circle" item-class="text-right pele_rtl">
      </fancy-select>

      <label ng-show="submitted && !lead.LEAD_TYPE" class="item no-border input-error text-right">
          נא בחר סוג ליד
      </label>
      <label class="item no-border item-toggle pele_rtl text-right">
          ליד עצמי
          <label class="toggle toggle-positive">
               <input type="checkbox" ng-model="lead.SELF">
               <div class="track">
                 <div class="handle"></div>
               </div>
             </label>
      </label>
      <label class="pele_rtl item-text-wrap"><small>** ליד עצמי לא יעבור להמשך טיפול אצל הגורמים השונים בפלאפון</small>
        </label>
      <a href="#" style="margin-top:20px;margin-left:10px" class="fab" ng-click="openModal()">
              <i class="icon ion-upload icon-center"></i>
      </a>
      <div class="list lead-form pele_rtl text-right">
        <label class="item no-border item-input">
              <span class="input-label">* שם פרטי</span>
              <input type="text" name="FIRST_NAME"  ng-model="lead.FIRST_NAME" required>
            </label>
        <label ng-show="leadform.FIRST_NAME.$invalid && (leadform.FIRST_NAME.$dirty || submitted)" class="item no-border input-error">
              יש להזין שם פרטי
              </label>

        <label class="item no-border item-input">
                <span class="input-label">* שם משפחה</span>
                <input type="text"  name="LAST_NAME"  ng-model="lead.LAST_NAME" required>
              </label>
        <label ng-show="leadform.LAST_NAME.$invalid && (leadform.LAST_NAME.$dirty || submitted)" class="item no-border input-error">
                  יש להזין שם משפחה
              </label>

        <label class="item no-border item-input item-text-wrap">
                <span class="input-label">* מס טלפון לחזרה</span>
                <input type="tel"  name="PHONE_NO_1"  ng-model="lead.PHONE_NO_1" required ng-pattern="/^05\d-?[0-9]{1}-?[0-9]{2}-?[0-9]{4}$/">
              </label>
        <label ng-show="leadform.PHONE_NO_1.$invalid &&  (leadform.PHONE_NO_1.$dirty  || submitted)" class="item no-border input-error">
                יש להזין מס' סלולארי תקין
             </label>

        <label class="item no-border item-input item-text-wrap">
                <span class="input-label">מספר טלפון נוסף</span>
                <input type="tel" name="PHONE_NO_2" ng-model="lead.PHONE_NO_2" ng-pattern="/^0[0-9]{2}-?[0-9]{1}-?[0-9]{2}-?[0-9]{3,4}$/">
              </label>
        <label ng-show="leadform.PHONE_NO_2.$invalid && (leadform.PHONE_NO_2.$dirty  || submitted)" class="item no-border  input-error">
                יש להזין מס' נוסף תקין
              </label>
        <label class="item no-border item-input">
              <span class="input-label">ת.ז לקוח</span>
              <input type="text" name="CUSTOMER_ID" ng-model="lead.CUSTOMER_ID" ng-pattern="/^[0-9]{2,10}$/">
            </label>
        <label ng-show="leadform.CUSTOMER_ID.$invalid && (leadform.CUSTOMER_ID.$dirty  || submitted)" class="item no-border  input-error">
              יש להזין מס' תקין'
              </label>
        <label class="item no-border item-input item-text-wrap">
                <span class="input-label">שעות רצויות לחזרה</span>
                <input style="border:1px solid black;border-radius:4px" ng-model="from_hour" type="time" min="8" max="20" step="1" size="3">
                <input style="border:1px solid black;border-radius:4px" ng-model="from_hour" type="time" min="8" max="20" step="1" size="3">
                <input type="datetime">
                <!--input type="text" ng-model="lead.PREFRRED_HOURS"-->
              </label>
        <label class="item no-border item-input item-text-wrap">
                <input type="time" id="exampleInput" name="input" ng-model="departureDate"
                  placeholder="HH:mm" min="08:00" max="17:00" required />
                <!--input type="text" ng-model="lead.PREFRRED_HOURS"-->
              </label>
        <label class="item no-border item-input item-text-wrap">
                <input type="date" id="exampleInput" name="input" ng-model="departureDate1"  required />
              </label>
        <ng-include style="background:#CCC" src="'app/apps/leads/extra.html'"></ng-include>
        <label class="item no-border item-input item-text-wrap">
              <span class="input-label">הערות</span>

            </label>
        <label class="item no-border item-input item-text-wrap">
            <textarea wrap="off"  ng-modle="lead.NOTE"></textarea>
            </label>
      </div>
    </ion-content>
    <!--ion-footer-bar style="height:50px;max-height:50px" align-title="right">
      <div class="row">
        <div class="col">
          <button class="button button-block button-large button-positive icon-right ion-paper-airplane" ng-click="showBtnActions()">פעולות</button>
        </div>
        <div class="col">
          <button class="button button-block button-large button-balanced icon-right ion-document-text" ng-click="NotePopup()">הערה</button>
        </div>
      </div-->
    </ion-footer-bar>
    <div style="" class="bar bar-footer bar-clean">
      <a class="button button-block  button-positive icon-right ion-paper-airplane" ng-show="!lead.LEAD_ID" ng-click="submit(leadform)" class="title">פתיחת ליד</a>
      <a class="button button-block  button-balanced icon-right ion-document-text" ng-show="lead.LEAD_ID" ng-click="submit(leadform)" class="title">עדכן ליד עצמי</a>
      <a class="button button-block  button-danger icon-right ion-document-text" ng-show="lead.LEAD_ID" ng-click="delete(lead.LEAD_ID)" class="title">מחק ליד עצמי</a>
    </div>
  </ng-form>
</ion-view>
<script id="upload.html" type="text/ng-template">
  <ion-modal-view class="pele-background">
    <div class="bar bar-header bar-positive">
      <h1 class="title">צירוף קבצים לליד</h1>
      <button ng-click="closeModal()" class="button button-icon ion-close-circled"></button>
    </div>
    <ion-content>
      <div style="margin-top:120px" class="apps-front-menu">
        <button ui-sref="app.leads.lead" class="button button-large button-stable button-block text-right item-icon-left">
      מצלמה <i class="icon ion-ios-camera-outline icon-left"></i>
    </button>
        <button ui-sref="app.leads.report({personal:false})" class="button button-large button-stable button-block item-icon-left text-right">
               גלריה  <i class="icon ion-images icon-left"></i>
      </button>
        <button ngf-select="upload($file)" class="button button-large button-stable button-block item-icon-left text-right">
  אחסון מכשיר   <i class="icon ion-ios-folder-outline icon-left"></i>
      </button>
      </div>
    </ion-content>
  </ion-modal-view>
</script>
